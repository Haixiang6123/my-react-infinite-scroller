(this["webpackJsonpmy-react-infinite-scroller"]=this["webpackJsonpmy-react-infinite-scroller"]||[]).push([[0],{23:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(11),o=n.n(s),i=n(4),c=n(2),a=n.n(c),l=n(5),u=n(3),h=n(10),d=n(15),p=n(12),v=n(13),f=n(6),j=n(16),b=n(14),O=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).scrollComponent=null,r.loadingMore=!1,r.pageLoaded=0,r.eventOptions={},r.beforeScrollTop=0,r.beforeScrollHeight=0,r.scrollListener=r.scrollListener.bind(Object(f.a)(r)),r.getEventListenerOptions=r.getEventListenerOptions.bind(Object(f.a)(r)),r.mousewheelListener=r.mousewheelListener.bind(Object(f.a)(r)),r}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart||0,this.eventOptions=this.getEventListenerOptions(),this.attachListeners()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadingMore){var e=this.getParentElement(this.scrollComponent);e&&(e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadingMore=!1)}this.attachListeners()}},{key:"componentWillUnmount",value:function(){this.detachListeners(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){return e=!0,!0}};try{var n=function(){};document.addEventListener("test",n,t),document.removeEventListener("test",n,t)}catch(r){}return e}},{key:"getEventListenerOptions",value:function(){var e={useCapture:this.props.useCapture||!1,passive:!1};return this.isPassiveSupported()&&(e.passive=!0),e}},{key:"scrollListener",value:function(){var e=this.scrollComponent;if(e){var t=this.getParentElement(e);if(t){var n;if(this.props.useWindow){var r=document.documentElement||document.body.parentElement||document.body,s=window.pageYOffset||r.scrollTop;n=this.props.isReverse?s:this.calculateOffset(e,s)}else n=this.props.isReverse?t.scrollTop:e.scrollHeight-t.scrollTop-t.clientHeight;n<(this.props.threshold||300)&&e&&null!==e.offsetParent&&(this.detachListeners(),this.beforeScrollHeight=t.scrollHeight,this.beforeScrollTop=t.scrollTop,this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadingMore=!0))}}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return t||e&&e.parentElement}},{key:"attachListeners",value:function(){var e=this.getParentElement(this.scrollComponent);if(e&&this.props.hasMore){var t=this.props.useWindow?window:e;t.addEventListener("mousewheel",this.mousewheelListener,this.eventOptions),t.addEventListener("scroll",this.scrollListener,this.eventOptions),t.addEventListener("resize",this.scrollListener,this.eventOptions),this.props.initialLoad&&this.scrollListener()}}},{key:"detachMousewheelListener",value:function(){var e,t=this.props.useWindow?window:null===(e=this.scrollComponent)||void 0===e?void 0:e.parentElement;t&&t.removeEventListener("mousewheel",this.mousewheelListener,this.eventOptions)}},{key:"detachListeners",value:function(){var e=this.props.useWindow?window:this.getParentElement(this.scrollComponent);e&&(e.removeEventListener("scroll",this.scrollListener,this.eventOptions),e.removeEventListener("resize",this.scrollListener,this.eventOptions))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,s=t.element,o=t.hasMore,i=t.isReverse,c=t.loader,a=(t.loadMore,t.initialLoad,t.pageStart,t.ref),l=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,Object(d.a)(t,["children","element","hasMore","isReverse","loader","loadMore","initialLoad","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"])),u=[n];o&&c&&(i?u.unshift(c):u.push(c));var p=Object(h.a)(Object(h.a)({},l),{},{ref:function(t){e.scrollComponent=t,a&&a(t)}});return Object(r.createElement)(s||"div",p,u)}}]),n}(r.Component);O.defaultProps={initialLoad:!0,element:"div",threshold:300,isReverse:!1,hasMore:!0,pageStart:0,getScrollParent:null,useWindow:!0,useCapture:!1};var m=O,w=function(e){return new Promise((function(t){setTimeout((function(){e().then((function(){return t}))}),1500)}))},g=n(0),L=0,x=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],o=function(){var e=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(Object(u.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=L;r<L+50;r++)t.push("Counter: ".concat(r," |||| ").concat((new Date).toISOString()));s([].concat(Object(l.a)(n),t)),L+=50;case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o().then()}),[]),Object(g.jsx)("div",{style:{height:250,overflow:"auto",border:"1px solid red"},children:Object(g.jsx)(m,{useWindow:!1,threshold:50,loadMore:o,loader:Object(g.jsx)("div",{className:"loader",children:"Loading ..."},0),children:n.map((function(e){return Object(g.jsx)("div",{children:e},e)}))})})},S=0,y=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],o=function(){var e=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(Object(u.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=S;r<S+150;r++)t.push("Counter: ".concat(r," |||| ").concat((new Date).toISOString()));s([].concat(Object(l.a)(n),t)),S+=150;case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o().then()}),[]),Object(g.jsx)("div",{style:{border:"1px solid blue"},children:Object(g.jsx)(m,{useWindow:!0,threshold:300,loadMore:o,loader:Object(g.jsx)("div",{className:"loader",children:"Loading ..."},0),children:n.map((function(e){return Object(g.jsx)("div",{children:e},e)}))})})},E=0,k=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],o=function(){var e=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(Object(u.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=E;r<E+50;r++)t.push("Counter: ".concat(r," |||| ").concat((new Date).toISOString()));s([].concat(Object(l.a)(n),t)),E+=50;case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o().then()}),[]),Object(g.jsx)("div",{style:{height:250,overflow:"auto",border:"1px solid red"},children:Object(g.jsx)(m,{isReverse:!0,useWindow:!1,threshold:50,loadMore:o,loader:Object(g.jsx)("div",{className:"loader",children:"Loading ..."},0),children:n.slice().reverse().map((function(e){return Object(g.jsx)("div",{children:e},e)}))})})},P=function(){var e=Object(r.useState)("1"),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:function(){return s("1")},children:"Div \u5411\u4e0b\u65e0\u9650\u6eda\u52a8"}),Object(g.jsx)("button",{onClick:function(){return s("2")},children:"Window \u5411\u4e0b\u65e0\u9650\u6eda\u52a8"}),Object(g.jsx)("button",{onClick:function(){return s("3")},children:"Div \u5411\u4e0a\u65e0\u9650\u6eda\u52a8"})]}),Object(g.jsxs)("div",{children:["1"===n&&Object(g.jsx)(x,{}),"2"===n&&Object(g.jsx)(y,{}),"3"===n&&Object(g.jsx)(k,{})]})]})};o.a.render(Object(g.jsx)(P,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.fde61589.chunk.js.map